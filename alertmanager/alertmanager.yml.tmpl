global:
  resolve_timeout: 5m

route:
  receiver: telegram
  group_by: ["alertname", "instance", "job"]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h

receivers:
  - name: telegram
    telegram_configs:
      - bot_token: "__TELEGRAM_BOT_TOKEN__"
        chat_id: __TELEGRAM_CHAT_ID__
        parse_mode: Markdown
        send_resolved: true
        message: |-
          *{{ .Status | toUpper }}* - `{{ reReplaceAll "`" "'" .CommonLabels.alertname }}`
          *Severity:* `{{ reReplaceAll "`" "'" .CommonLabels.severity }}`
          *Active alerts:* `{{ len .Alerts }}`
          {{ range .Alerts }}
          ---
          *Target:* `{{ reReplaceAll "`" "'" (or .Labels.instance "n/a") }}`
          *Job:* `{{ reReplaceAll "`" "'" (or .Labels.job "n/a") }}`
          *Summary:* `{{ reReplaceAll "`" "'" .Annotations.summary }}`
          *Description:* `{{ reReplaceAll "`" "'" .Annotations.description }}`
          *Started:* `{{ .StartsAt }}`
          {{ end }}
